<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Troubleshooting Guide: Troubleshooting Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Troubleshooting Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
<img src="infa_logo.png" width="400" height="138" alt="Informatica"/><br/><br/>
<big><b>Ultra Messaging</b></big> <small>(Version 6.14)</small><br/>
<br/><br/><br/>
<center class="mytitle">Troubleshooting Guide</center>
<br/><br/><br/>
[&nbsp;<a href="../index.html">Multi-page HTML</a>&nbsp;]&nbsp;&nbsp;|&nbsp;&nbsp;[&nbsp;<a href="../Troubleshooting_Guide=en.pdf">PDF</a>&nbsp;]
<br/><br/>
 </p>
<h1><a class="anchor" id="firstsect"></a>
Introduction&nbsp;&nbsp;<small><a href="#firstsect">&lt;-</a></small></h1>
<p>This document outlines the general procedure for diagnosing UM problems.</p>
<p>For policies and procedures related to Ultra Messaging Technical Support, see <a href="https://ultramessaging.github.io/UM_Support.html">UM Support</a>.</p>
<p><b>&copy; Copyright (C) 2004-2020, Informatica LLC. All Rights Reserved.</b></p>
<p>This software and documentation are provided only under a separate license agreement containing restrictions on use and disclosure. No part of this document may be reproduced or transmitted in any form, by any means (electronic, photocopying, recording or otherwise) without prior consent of Informatica LLC.</p>
<p>A current list of Informatica trademarks is available on the web at <a href="https://www.informatica.com/trademarks.html">https://www.informatica.com/trademarks.html</a>.</p>
<p>Portions of this software and/or documentation are subject to copyright held by third parties. Required third party notices are included with the product.</p>
<p>This software is protected by patents as detailed at <a href="https://www.informatica.com/legal/patents.html">https://www.informatica.com/legal/patents.html</a>.</p>
<p>The information in this documentation is subject to change without notice. If you find any problems in this documentation, please report them to us in writing at Informatica LLC 2100 Seaport Blvd. Redwood City, CA 94063.</p>
<p>Informatica products are warranted according to the terms and conditions of the agreements under which they are provided. <br />
INFORMATICA LLC PROVIDES THE INFORMATION IN THIS DOCUMENT "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING WITHOUT ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND ANY WARRANTY OR CONDITION OF NON-INFRINGEMENT.</p>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingoverview"></a>
Troubleshooting Overview&nbsp;&nbsp;<small><a href="#troubleshootingoverview">&lt;-</a></small></h1>
<p>For a deep technical introduction to Ultra Messaging, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/fundamentalconcepts.html">Fundamental Concepts</a>.</p>
<p>This guide assumes you have a fully-developed distributed system using UM messaging which has been demonstrate to work within the development environment. Now you are having trouble in a QA or production environment. The goal is to identify and fix problems as quickly as possible.</p>
<p><b>ASSUMPTIONS</b>: </p><ul>
<li>
Streaming use case (not Persistence or Queuing). </li>
<li>
Multicast Topic Resolution (no lbmrd or SRS). </li>
<li>
LBT-RM transport. </li>
<li>
Kernel-based NIC driver (no kernal-bypass). </li>
<li>
Microsoft Windows. </li>
<li>
Pub/Sub in same TRD (no DRO involved). </li>
<li>
Receivers using main context thread (no XSP involved). </li>
<li>
Receivers using context callbacks (no event queue involved). </li>
</ul>
<p>The problems covered in this guide are: </p><ul>
<li>
<a class="el" href="index.html#troubleshootingdeafness">Troubleshooting Deafness</a> - subscriber not getting messages. </li>
<li>
<a class="el" href="index.html#troubleshootingloss">Troubleshooting Loss</a> - subscriber reports loss. </li>
<li>
<a class="el" href="index.html#troubleshootingmemorygrowth">Troubleshooting Memory Growth</a> - publisher/subscriber growing. </li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>Before starting, please try to satisfy the <a class="el" href="index.html#troubleshootingprerequisites">Troubleshooting Prerequisites</a>.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingdeafness"></a>
Troubleshooting Deafness&nbsp;&nbsp;<small><a href="#troubleshootingdeafness">&lt;-</a></small></h1>
<p>The most common problem is that a subscriber for a UM topic is deafness - not receiving messages from one or more publishers of that topic.</p>
<p><br />
 </p>
<h2><a class="anchor" id="applicationlogsboseos"></a>
Application Logs BOS / EOS&nbsp;&nbsp;<small><a href="#applicationlogsboseos">&lt;-</a></small></h2>
<p>If your application logs BOS and EOS events, follow these steps. (If not, go to <a class="el" href="index.html#trylbmrcv">Try Lbmrcv</a>.)</p>
<p>Troubleshooting steps: </p><ol>
<li>
Identify the UM topic name. (Requires knowledge of the application.) </li>
<li>
Log into the subscriber host. </li>
<li>
Examine the subscriber's <a class="el" href="index.html#applicationlogfiles">log file</a>. Look for BOS and EOS events for the topic in question. The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a> will identify the IP of the publisher. <ul>
<li>
Have multiple EOS events: Go to <a class="el" href="index.html#rollingeos">Rolling EOS</a>. </li>
<li>
Have no BOS or EOS: Go to <a class="el" href="index.html#checkmulticasttr">Check Multicast TR</a>. </li>
<li>
Have BOS but no EOS. Go to next step. </li>
</ul>
</li>
<li>
Check the IP address in the BOS <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a>. Verify that it is that of the desired publisher. <ul>
<li>
If not, then treat this as "no BOS or EOS" and go to <a class="el" href="index.html#checkmulticasttr">Check Multicast TR</a>. </li>
<li>
If the BOS <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a> IP address is correct, this suggests that the connection is valid and that the publisher is not sending messages. Check application logic. </li>
</ul>
</li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="trylbmrcv"></a>
Try Lbmrcv&nbsp;&nbsp;<small><a href="#trylbmrcv">&lt;-</a></small></h2>
<p>Troubleshooting steps: </p><ol>
<li>
Identify the UM topic name. (Requires knowledge of the application.) </li>
<li>
Log into the subscriber host. </li>
<li>
Determine the configuration in use by the subscriber. </li>
<li>
<p class="startli">Create a stand-alone configuration file consumable by "lbmrcv". This can be XML or flat file.</p>
<p>If using an XML file and you need an application name to match to, set the following environment variables: </p><ul>
<li>
LBM_XML_CONFIG_APPNAME=app_name </li>
<li>
BM_XML_CONFIG_FILENAME=file_name </li>
</ul>
<p class="endli">If using a flat file configuration file, set the following environment variable: </p><ul>
<li>
LBM_DEFAULT_CONFIG_FILE=file_name </li>
</ul>
<p>These should be set prior to the next step. </p>
</li>
<li>
Run the "lbmrcv" command (see <a class="el" href="index.html#troubleshootingtools">Troubleshooting Tools</a>): <pre>
lbmrcv -v -v topic_name
</pre> where "topic_name" is the topic experiencing deafness. </li>
<li>
Watch lbmrcv's output for BOS / EOS events. It may take several seconds. The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a> will identify the IP of the publisher. <ul>
<li>
Have multiple EOS events: Go to <a class="el" href="index.html#rollingeos">Rolling EOS</a>. </li>
<li>
Have no BOS or EOS: Go to <a class="el" href="index.html#checkmulticasttr">Check Multicast TR</a>. </li>
<li>
Have BOS but no EOS. Go to next step. </li>
</ul>
</li>
<li>
Check the IP address in the BOS <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a>. Verify that it is that of the desired publisher. <ul>
<li>
If not, then treat this as "no BOS or EOS" and go to <a class="el" href="index.html#checkmulticasttr">Check Multicast TR</a>. </li>
<li>
If the BOS <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a> IP address is correct, this suggests that the connection is valid and that the publisher is not sending messages. Check application logic. </li>
</ul>
</li>
</ol>
<dl class="section attention"><dt>Attention</dt><dd>Performing this test can sometimes "fix" the deafness of the subscriber application. If that is the case, then the problem is related to Topic Resolution going <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/topicresolutiondescription.html#quiescentphase">Quiescent</a>. For example, there may have been a network outage that lasted longer than the Topic Resolution sustaining periods. The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/topicresolutiondescription.html#sustainingphase">Sustaining Phase</a> should be extended using <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpudpbasedresolveroperation.html#resolveradvertisementminimumsustaindurationsource">resolver_advertisement_minimum_sustain_duration (source)</a> and/or <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpudpbasedresolveroperation.html#resolverqueryminimumsustaindurationreceiver">resolver_query_minimum_sustain_duration (receiver)</a>.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="rollingeos"></a>
Rolling EOS&nbsp;&nbsp;<small><a href="#rollingeos">&lt;-</a></small></h2>
<p>A UM receiver can be in a state where it repeatedly reports EOS events (End Of Session) for a topic without corresponding BOS events (Beginning Of Session). These events are delivered to the application via the receiver callback and should be logged (see <a class="el" href="index.html#applicationlogfiles">Application Log Files</a>). See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/fundamentalconcepts.html#receiverbosandeosevents">Receiver BOS and EOS Events</a> for deeper technical information on BOS/EOS.</p>
<p>The EOS events should occur every 60 seconds by default, but check your value for the configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grptransportlbtrmoperation.html#transportlbtrmactivitytimeoutreceiver">transport_lbtrm_activity_timeout (receiver)</a>.</p>
<p>This state indicates that the subscriber is able to get Topic Resolution packets from the publisher, but the data transport packets can't get through.</p>
<p>Troubleshooting steps: </p><ol>
<li>
Examine the EOS message to determine the multicast group and port for the data transport. This comes from the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a>. For example: <pre>
LBTRM:10.29.3.88:14390:e0679abb:231.13.13.13:14400[1539853954]
</pre> <ul>
<li>
10.29.3.88 - The IP address of the publisher host. </li>
<li>
231.13.13.13 - The transport group. </li>
<li>
14400 - The transport port. </li>
</ul>
</li>
<li>
Go to <a class="el" href="index.html#verifymulticastconnectivity">Verify Multicast Connectivity</a> with <b>app_group</b> defined as the transport group and <b>app_port</b> defined as the transport port. </li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="checkmulticasttr"></a>
Check Multicast TR&nbsp;&nbsp;<small><a href="#checkmulticasttr">&lt;-</a></small></h2>
<p>Troubleshooting steps: </p><ol>
<li>
Log into the subscriber and publisher hosts. </li>
<li>
Verify that the subscriber and publisher are configured for the same <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpmulticastresolvernetwork.html#resolvermulticastaddresscontext">Topic Resolution group address</a>. </li>
<li>
<p class="startli">On the publisher's host, list the multicast groups that the host is joined to. Verify that the configured <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpmulticastresolvernetwork.html#resolvermulticastaddresscontext">Topic Resolution group address</a> is listed and has a reference count of at least 1. If not, restart the publisher.</p>
<p>On Windows the command is: </p><pre>
netsh interface ipv4 show joins
</pre><p class="endli">On Unix the command is: </p><pre>
netstat -gn | egrep -v ":"
</pre> </li>
<li>
Do the same for the subscriber. </li>
<li>
Verify multicast connectivity for the Topic Resolution group address. Go to <a class="el" href="index.html#verifymulticastconnectivity">Verify Multicast Connectivity</a> with <b>app_group</b> defined as the configured value for <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpmulticastresolvernetwork.html#resolvermulticastaddresscontext">resolver_multicast_address (context)</a> and <b>app_port</b> defined as the configured value for <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/config.tag:../../Config/" href="../../Config/grpmulticastresolvernetwork.html#resolvermulticastportcontext">resolver_multicast_port (context)</a>. </li>
<li>
If mtools verifies that the TR multicast works, <a class="el" href="index.html#trylbmrcv">Try Lbmrcv</a>. </li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="verifymulticastconnectivity"></a>
Verify Multicast Connectivity&nbsp;&nbsp;<small><a href="#verifymulticastconnectivity">&lt;-</a></small></h2>
<p>This checks multicast connectivity between two hosts: A and B. You should already know which multicast group and port you are checking: <b>app_group</b> and <b>app_port</b>.</p>
<p>This sequence uses "mtools" commands "msend" and "mdump". See <a class="el" href="index.html#troubleshootingtools">Troubleshooting Tools</a>.</p>
<p>Troubleshooting steps: </p><ol>
<li>
Choose a port that is not the application port: <b>alt_port</b>. </li>
<li>
On host A open two command tool windows. </li>
<li>
In command tool A1, run: <pre>
msend app_group alt_port
</pre> </li>
<li>
In command tool A2, run: <pre>
mdump app_group alt_port
</pre> </li>
<li>
<b>Result</b>: the "mdump" command should display the messages sent. <br />
<b>Note</b>: leave both commands running for now. </li>
<li>
On host B open two command tool windows. </li>
<li>
In command tool B1, run: <pre>
msend app_group alt_port
</pre> </li>
<li>
In command tool B2, run: <pre>
mdump app_group alt_port
</pre> </li>
<li>
<b>Result</b>: the "mdump" commands on both hosts should display the messages sent by both hosts. </li>
</ol>
<p>If the "mtools" commands can't communicate, then there is a serious problem with either the host OS or the network. (Diagnosing host and network problems is beyond the scope of this guide.)</p>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingloss"></a>
Troubleshooting Loss&nbsp;&nbsp;<small><a href="#troubleshootingloss">&lt;-</a></small></h1>
<p>TBD</p>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingmemorygrowth"></a>
Troubleshooting Memory Growth&nbsp;&nbsp;<small><a href="#troubleshootingmemorygrowth">&lt;-</a></small></h1>
<p>TBD</p>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingprerequisites"></a>
Troubleshooting Prerequisites&nbsp;&nbsp;<small><a href="#troubleshootingprerequisites">&lt;-</a></small></h1>
<p>Users can influence the ease and effectiveness of troubleshooting by following some guidelines: </p><ul>
<li>
<a class="el" href="index.html#operationsalerting">Operations Alerting</a> </li>
<li>
<a class="el" href="index.html#applicationlogfiles">Application Log Files</a> </li>
<li>
<a class="el" href="index.html#umlogalerting">UM Log Alerting</a> </li>
<li>
<a class="el" href="index.html#configurationrecommendations">Configuration Recommendations</a> </li>
<li>
<a class="el" href="index.html#troubleshootingtools">Troubleshooting Tools</a> </li>
<li>
<a class="el" href="index.html#monitoringtools">Monitoring Tools</a> </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="operationsalerting"></a>
Operations Alerting&nbsp;&nbsp;<small><a href="#operationsalerting">&lt;-</a></small></h2>
<p>Every application should have a way to alert the operations staff of trouble, both during testing and production. An effective alerting system is heavily dependent on the user's operational environment, and cannot be defined here. However, having an alerting system will save a lot of time when troubleshooting since the root cause of a user-visible problem often doesn't reside with the component that shows the problem.</p>
<p>Having an alerting system can help quickly pin-point the true source of the problem.</p>
<p><br />
 </p>
<h2><a class="anchor" id="applicationlogfiles"></a>
Application Log Files&nbsp;&nbsp;<small><a href="#applicationlogfiles">&lt;-</a></small></h2>
<p>All applications and test tools that use UM must log significant UM events. These include:</p>
<ul>
<li>
All receiver event types except DATA. The "unrecoverable loss" event should typically produce an operations alert. </li>
<li>
All failed API calls. These should generally produce an operations alert. (An exception might be a send function "wouldblock" error which the application is written to expect and handle appropriately.) </li>
<li>
All UM logging callbacks. These should be able to generate an operations alert, depending on the content of the UM log. See <a class="el" href="index.html#umlogalerting">UM Log Alerting</a>. </li>
</ul>
<p>The logging should include: </p><ul>
<li>
A timestamp with at least millisecond resolution. </li>
<li>
Thread ID. </li>
<li>
<p class="startli">Severity level. Most API failures should be treated as "error" or "severe error".</p>
<p>Logs delivered via the UM logging callback should use the severity level passed to the logging callback.</p>
<p class="endli">Severity levels of "error" and above should normally generate an alert, although see <a class="el" href="index.html#umlogalerting">UM Log Alerting</a>. </p>
</li>
<li>
Text of error message. </li>
<li>
For events delivered by the receiver callback, include the topic name and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/umobjects.html#sourcestring">Source String</a>. </li>
</ul>
<p>Application logging to a file should not be done synchronously with the application code, as this can introduce disruptive delays. Messages to be logged should be passed to a separate application logging thread via a queue. Care must be taken in the design of the logging thread and queue so that very rapid log generation does not exhaust available memory.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umlogalerting"></a>
UM Log Alerting&nbsp;&nbsp;<small><a href="#umlogalerting">&lt;-</a></small></h3>
<p>Informatica has evaluated each log message and has assigned a severity level to each one. This can be used by the application as a first approximation to whether to trigger an operations alert.</p>
<p>However, experience has demonstrated that it is not possible to accurately assign a severity level that applies equally to different use cases. In short: UM cannot know whether a given log deserves immediate attention of operations staff, or if it is just "noise". This must be determined empirically by the user.</p>
<p>One good strategy is to pay less attention to UM's assigned severity level and instead create a list of messages that are known to be "normal" for a given application or application class. A log scanner would then send an operations alert for any log message <em>not</em> in that normal list. This log scanner should run in real-time to ensure timely alerting.</p>
<p>For this strategy to be successful, it must be very easy to add new messages to the normal list. I.e. it should not be compiled into the application code. During the early phases of system deployment, new messages will occasionally show up that are informational and do not need attention, and should be added to the normal list. We encourage our users to contact Informatica Support to review your normal list.</p>
<p>Do not use the text of the error message itself for matching as we sometimes change the text to add helpful information. Instead use the initial message ID. For example, "Core-5688-3273".</p>
<p>It may also be appropriate to apply some thresholding to specific messages in terms of their frequency. One or two EOS events might be perfectly normal. But 20 or 30 might indicate a serious problem. Unfortunately, these are very difficult to identify and plan for up front. For example, EOS might be initially declared as normal, and everything will be fine for years. Then the network might develop a multicast routing problem which manifests as <a class="el" href="index.html#rollingeos">Rolling EOS</a>, which indicates a serious problem.</p>
<p><br />
 </p>
<h2><a class="anchor" id="configurationrecommendations"></a>
Configuration Recommendations&nbsp;&nbsp;<small><a href="#configurationrecommendations">&lt;-</a></small></h2>
<p>TBD lbt-rm loss recovery (NAK backoff)</p>
<p>TBD <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../../Design/" href="../../Design/topicresolutiondescription.html#udpbasedtopicresolutionstrategies">UDP-Based Topic Resolution Strategies</a></p>
<p>TBD TR durations</p>
<p><br />
 </p>
<h2><a class="anchor" id="troubleshootingtools"></a>
Troubleshooting Tools&nbsp;&nbsp;<small><a href="#troubleshootingtools">&lt;-</a></small></h2>
<p>The following tools should be available on all test and production machines.</p>
<ul>
<li>
<b>msend and mdump</b> (mtools). See <a href="https://community.informatica.com/solutions/informatica_mtools">https://community.informatica.com/solutions/informatica_mtools</a> for source and executables. </li>
<li>
<b>lbmsrc and lbmrcv</b>. Part of the UM product package in the "bin" directory. </li>
<li>
<p class="startli"><b>Process stack dumps</b>.</p>
<p>Most Unix systems have a "pstack" command that shows a per-thread stack back trace snapshot of a running process. This command is minimally invasive.</p>
<p>For Windows, Microsoft offers Process Monitor at <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/procmon">https://docs.microsoft.com/en-us/sysinternals/downloads/procmon</a> as part of a larger set of process utilities; see <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/process-utilities">https://docs.microsoft.com/en-us/sysinternals/downloads/process-utilities</a>.</p>
<p class="endli"></p>
</li>
<li>
<b>Core dumps</b>. The operating system should be set up to allow the writing of crash dumps (core files) if a process aborts. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="monitoringtools"></a>
Monitoring Tools&nbsp;&nbsp;<small><a href="#monitoringtools">&lt;-</a></small></h2>
<p><br />
 </p>
<h3><a class="anchor" id="monitoringdaemons"></a>
Monitoring Daemons&nbsp;&nbsp;<small><a href="#monitoringdaemons">&lt;-</a></small></h3>
<p>TBD alerting.</p>
<p>TBD stats via web vs publish.</p>
<p>TBD store, dro, lbmrd, srs.</p>
<p>TBD daemon log files.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umtransportmonitoring"></a>
UM Transport Monitoring&nbsp;&nbsp;<small><a href="#umtransportmonitoring">&lt;-</a></small></h3>
<p>TBD Integrate into application alerting system (self monitoring).</p>
<p>TBD loss can be a warning of future unrecoverable loss.</p>
<p><br />
 </p>
<h3><a class="anchor" id="hostmonitoring"></a>
Host Monitoring&nbsp;&nbsp;<small><a href="#hostmonitoring">&lt;-</a></small></h3>
<p>There are many different host monitoring packages, both open source and enterprise, which run continuously and allow the user to examine current and historical system statistics.</p>
<p>Informatica recommends a time granularity of at most 5 minutes between samples.</p>
<ul>
<li>
Socket buffer overflow. </li>
<li>
NIC drops. </li>
<li>
CPU loading, ideally per thread. </li>
<li>
Processes running. </li>
</ul>
<p>TBD alerting. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
