<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Troubleshooting Guide: Troubleshooting Prerequisites</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Troubleshooting Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('troubleshootingprerequisites.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Troubleshooting Prerequisites </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Users can influence the ease and effectiveness of troubleshooting by following some guidelines: </p><ul>
<li>
<a class="el" href="troubleshootingprerequisites.html#operationsalerting">Operations Alerting</a> </li>
<li>
<a class="el" href="troubleshootingprerequisites.html#applicationlogfiles">Application Log Files</a> </li>
<li>
<a class="el" href="troubleshootingprerequisites.html#umlogalerting">UM Log Alerting</a> </li>
<li>
<a class="el" href="troubleshootingprerequisites.html#configurationrecommendations">Configuration Recommendations</a> </li>
<li>
<a class="el" href="troubleshootingprerequisites.html#troubleshootingtools">Troubleshooting Tools</a> </li>
<li>
<a class="el" href="troubleshootingprerequisites.html#monitoringtools">Monitoring Tools</a> </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="operationsalerting"></a>
Operations Alerting&nbsp;&nbsp;<small><a href="#operationsalerting">&lt;-</a></small></h1>
<p>Every application should have a way to alert the operations staff of trouble, both during testing and production. An effective alerting system is heavily dependent on the user's operational environment, and cannot be defined here. However, having an alerting system will save a lot of time when troubleshooting since the root cause of a user-visible problem often doesn't reside with the component that shows the problem.</p>
<p>Having an alerting system can help quickly pin-point the true source of the problem.</p>
<p><br />
 </p>
<h1><a class="anchor" id="applicationlogfiles"></a>
Application Log Files&nbsp;&nbsp;<small><a href="#applicationlogfiles">&lt;-</a></small></h1>
<p>All applications and test tools that use UM must log significant UM events. These include:</p>
<ul>
<li>
All receiver event types except DATA. The "unrecoverable loss" event should typically produce an operations alert. </li>
<li>
All failed API calls. These should generally produce an operations alert. (An exception might be a send function "wouldblock" error which the application is written to expect and handle appropriately.) </li>
<li>
All UM logging callbacks. These should be able to generate an operations alert, depending on the content of the UM log. See <a class="el" href="troubleshootingprerequisites.html#umlogalerting">UM Log Alerting</a>. </li>
</ul>
<p>The logging should include: </p><ul>
<li>
A timestamp with at least millisecond resolution. </li>
<li>
Thread ID. </li>
<li>
<p class="startli">Severity level. Most API failures should be treated as "error" or "severe error".</p>
<p>Logs delivered via the UM logging callback should use the severity level passed to the logging callback.</p>
<p class="endli">Severity levels of "error" and above should normally generate an alert, although see <a class="el" href="troubleshootingprerequisites.html#umlogalerting">UM Log Alerting</a>. </p>
</li>
<li>
Text of error message. </li>
<li>
For events delivered by the receiver callback, include the topic name and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../Design/" href="../Design/umobjects.html#sourcestring">Source String</a>. </li>
</ul>
<p>Application logging to a file should not be done synchronously with the application code, as this can introduce disruptive delays. Messages to be logged should be passed to a separate application logging thread via a queue. Care must be taken in the design of the logging thread and queue so that very rapid log generation does not exhaust available memory.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umlogalerting"></a>
UM Log Alerting&nbsp;&nbsp;<small><a href="#umlogalerting">&lt;-</a></small></h2>
<p>Informatica has evaluated each log message and has assigned a severity level to each one. This can be used by the application as a first approximation to whether to trigger an operations alert.</p>
<p>However, experience has demonstrated that it is not possible to accurately assign a severity level that applies equally to different use cases. In short: UM cannot know whether a given log deserves immediate attention of operations staff, or if it is just "noise". This must be determined empirically by the user.</p>
<p>One good strategy is to pay less attention to UM's assigned severity level and instead create a list of messages that are known to be "normal" for a given application or application class. A log scanner would then send an operations alert for any log message <em>not</em> in that normal list. This log scanner should run in real-time to ensure timely alerting.</p>
<p>For this strategy to be successful, it must be very easy to add new messages to the normal list. I.e. it should not be compiled into the application code. During the early phases of system deployment, new messages will occasionally show up that are informational and do not need attention, and should be added to the normal list. We encourage our users to contact Informatica Support to review your normal list.</p>
<p>Do not use the text of the error message itself for matching as we sometimes change the text to add helpful information. Instead use the initial message ID. For example, "Core-5688-3273".</p>
<p>It may also be appropriate to apply some thresholding to specific messages in terms of their frequency. One or two EOS events might be perfectly normal. But 20 or 30 might indicate a serious problem. Unfortunately, these are very difficult to identify and plan for up front. For example, EOS might be initially declared as normal, and everything will be fine for years. Then the network might develop a multicast routing problem which manifests as <a class="el" href="troubleshootingdeafness.html#rollingeos">Rolling EOS</a>, which indicates a serious problem.</p>
<p><br />
 </p>
<h1><a class="anchor" id="configurationrecommendations"></a>
Configuration Recommendations&nbsp;&nbsp;<small><a href="#configurationrecommendations">&lt;-</a></small></h1>
<p>TBD lbt-rm loss recovery (NAK backoff)</p>
<p>TBD <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_DEV_MAIN/29West/lbm/doc/Tshoot/design.tag:../Design/" href="../Design/topicresolutiondescription.html#udpbasedtopicresolutionstrategies">UDP-Based Topic Resolution Strategies</a></p>
<p>TBD TR durations</p>
<p><br />
 </p>
<h1><a class="anchor" id="troubleshootingtools"></a>
Troubleshooting Tools&nbsp;&nbsp;<small><a href="#troubleshootingtools">&lt;-</a></small></h1>
<p>The following tools should be available on all test and production machines.</p>
<ul>
<li>
<b>msend and mdump</b> (mtools). See <a href="https://community.informatica.com/solutions/informatica_mtools">https://community.informatica.com/solutions/informatica_mtools</a> for source and executables. </li>
<li>
<b>lbmsrc and lbmrcv</b>. Part of the UM product package in the "bin" directory. </li>
<li>
<p class="startli"><b>Process stack dumps</b>.</p>
<p>Most Unix systems have a "pstack" command that shows a per-thread stack back trace snapshot of a running process. This command is minimally invasive.</p>
<p>TBD For Windows</p>
<p class="endli"></p>
</li>
<li>
<b>Core dumps</b>. The operating system should be set up to allow the writing of crash dumps (core files) if a process aborts. </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="monitoringtools"></a>
Monitoring Tools&nbsp;&nbsp;<small><a href="#monitoringtools">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="monitoringdaemons"></a>
Monitoring Daemons&nbsp;&nbsp;<small><a href="#monitoringdaemons">&lt;-</a></small></h2>
<p>TBD alerting.</p>
<p>TBD stats via web vs publish.</p>
<p>TBD store, dro, lbmrd, srs.</p>
<p>TBD daemon log files.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umtransportmonitoring"></a>
UM Transport Monitoring&nbsp;&nbsp;<small><a href="#umtransportmonitoring">&lt;-</a></small></h2>
<p>TBD Integrate into application alerting system (self monitoring).</p>
<p>TBD loss can be a warning of future unrecoverable loss.</p>
<p><br />
 </p>
<h2><a class="anchor" id="hostmonitoring"></a>
Host Monitoring&nbsp;&nbsp;<small><a href="#hostmonitoring">&lt;-</a></small></h2>
<p>There are many different host monitoring packages, both open source and enterprise, which run continuously and allow the user to examine current and historical system statistics.</p>
<p>Informatica recommends a time granularity of at most 5 minutes between samples.</p>
<ul>
<li>
Socket buffer overflow. </li>
<li>
NIC drops. </li>
<li>
CPU loading, ideally per thread. </li>
<li>
Processes running. </li>
</ul>
<p>TBD alerting. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
